<IfModule mod_rewrite.c>
  RewriteEngine On

  # ======================================================
  # PART 1: REDIRECT ALL .html REQUESTS TO CLEAN URLs
  # ======================================================
  # Redirect any direct access to .html files (e.g., /about.html → /about)
  RewriteCond %{THE_REQUEST} \s/+(.*?)\.html[\s?] [NC]
  RewriteRule ^ /%1 [R=301,L,NE]

  # ======================================================
  # PART 2: REWRITE CLEAN URLs TO .html FILES IN /src/pages
  # ======================================================
  # Serve clean URLs (e.g., /about → /src/pages/about.html)
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule ^([^/]+)/?$ src/pages/$1.html [L,NC]

  # ======================================================
  # PART 3: BLOCK DIRECT ACCESS TO /src/pages AND .html FILES
  # ======================================================
  # Block access to the /src/pages directory
  RewriteRule ^src/pages/ - [F,L]

  # Block direct access to .html files (optional but recommended)
  RewriteCond %{THE_REQUEST} \.html[\s?] [NC]
  RewriteRule ^ - [F,L]

  # ======================================================
  # PART 4: REMOVE TRAILING SLASHES
  # ======================================================
  # Remove trailing slashes (e.g., /about/ → /about)
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond %{REQUEST_URI} ^(.+)/+$
  RewriteRule ^ %1 [R=301,L,NE]
</IfModule>